#include<bits/stdc++.h>
using namespace std;

#define pb push_back
#define ll long long int
#define mod 100000
#define rep(i,k,n) for(ll i=k;i<n;i++)
#define E cout<<endl
#define MAX  1000002
#define u_m  unordered_map
#define bbit bitset <64>





int32_t main()
{
 
    ios_base:: sync_with_stdio(false);
	cin.tie(0);
	int t;
	cin>>t;
	while(t--){
	    int n;cin>>n;
    string s;
	cin >> s;
	
//	cout << s << endl;

	int cnt = 0, ans = 0;

	for (int i = 0; i < s.size(); i++) {
		if (s[i] == '[')
			cnt++;
		else
			cnt--;

		if (cnt < 0)
		{
			for (int j = i + 1; j < s.size(); j++)
			{
				if (s[j] == '[')
				{
					char temp = s[j];
					for (int k = j - 1; k >= i; k--)
						s[k + 1] = s[k];
					s[i] = temp;
					ans = ans + (j - i);

				
					cnt = 1;
					break;


				}
			}
		}


	}
	cout << ans << endl;

    }
    
    
    
    
	return 0;
}